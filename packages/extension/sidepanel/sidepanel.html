<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CoLink</title>
  <link rel="stylesheet" href="sidepanel.css">
</head>
<body>
  <div class="container">
    <!-- 头部 -->
    <header class="header">
      <h1 class="title">🔗 CoLink</h1>
      <div class="tabs">
        <button class="tab-btn active" data-tab="main">找相似</button>
        <button class="tab-btn" data-tab="favorites">已收藏</button>
        <button class="tab-btn" data-tab="templates">邮件模板</button>
      </div>
    </header>

    <!-- 主界面：找相似用户 -->
    <div id="main-tab" class="tab-content active">
      <!-- 状态显示区 -->
      <div id="status-area">
        <!-- 加载中 -->
        <div id="loading" class="status-card" style="display: none;">
          <div class="loader"></div>
          <p>正在查找相似用户...</p>
        </div>

        <!-- 错误提示 -->
        <div id="error" class="status-card error" style="display: none;">
          <p id="error-message"></p>
        </div>

        <!-- 非个人主页提示 -->
        <div id="not-profile" class="status-card info">
          <p>📌 这里不是用户主页，没法找相似哦～</p>
          <p class="hint">先打开一个特别符合你理想用户主页，再点"找相似"按钮。</p>
        </div>
        
        <!-- 待开始状态 -->
        <div id="ready-to-start" class="status-card info" style="display: none;">
          <p>👤 已识别用户主页</p>
          <p class="hint">点击下方按钮，基于当前用户找相似</p>
          <button id="btn-start-search" class="btn btn-primary">
            🔍 找相似
          </button>
        </div>
      </div>

      <!-- 统计信息 -->
      <div id="stats" class="stats" style="display: none;">
        <div class="stat-item">
          <div class="stat-label">待筛选</div>
          <div class="stat-value" id="pending-count">0</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">已收藏</div>
          <div class="stat-value" id="favorite-count">0</div>
        </div>
      </div>

      <!-- 当前推荐用户 -->
      <div id="current-user" style="display: none;">
        <!-- 操作按钮 -->
        <div class="actions">
          <button id="btn-skip" class="btn btn-skip">
            👋 NO
          </button>
          <button id="btn-like" class="btn btn-like">
            ✅ 收藏
          </button>
        </div>
        
        <!-- 停止按钮 -->
        <button id="btn-stop" class="btn btn-stop">
          ⏹️ 停止筛选
        </button>
      </div>
    </div>

    <!-- 收藏列表页面 -->
    <div id="favorites-tab" class="tab-content">
      <div id="favorites-list"></div>
      <div id="favorites-empty" class="empty-state" style="display: none;">
        <p>📭 暂无收藏</p>
        <p class="hint">在找相似页面点击"收藏"按钮保存候选人</p>
      </div>
    </div>

    <!-- 邮件模板管理页面 -->
    <div id="templates-tab" class="tab-content">
      <div class="templates-header">
        <button id="btn-add-template" class="btn btn-primary">
          ➕ 新建模板
        </button>
      </div>

      <div id="templates-list" class="templates-list">
        <!-- 动态加载模板列表 -->
      </div>

      <div id="templates-empty" class="empty-state" style="display: none;">
        <p>📝 暂无邮件模板</p>
        <p class="hint">点击"新建模板"创建你的第一个邮件模板</p>
      </div>
    </div>

    <!-- 模板编辑弹窗 -->
    <div id="template-modal" class="modal" style="display: none;">
      <div class="modal-content">
        <div class="modal-header">
          <h3 id="modal-title">新建模板</h3>
          <button class="modal-close" id="modal-close">×</button>
        </div>
        <div class="modal-body">
          <div class="form-group">
            <label for="template-name">模板名称</label>
            <input type="text" id="template-name" class="form-input" placeholder="例如：通用招聘">
          </div>
          <div class="form-group">
            <label for="template-subject">邮件主题</label>
            <input type="text" id="template-subject" class="form-input" placeholder="例如：Exciting opportunity at {company}">
          </div>
          <div class="form-group">
            <label for="template-body">邮件内容</label>
            <textarea id="template-body" class="form-textarea" rows="10" placeholder="输入邮件内容...&#10;&#10;可用变量：&#10;{name} - 用户姓名&#10;{title} - 职位&#10;{company} - 公司&#10;{location} - 地点"></textarea>
          </div>
          <div class="form-hint">
            💡 提示：使用 {name}、{title}、{company}、{location} 作为变量占位符
          </div>
        </div>
        <div class="modal-footer">
          <button id="btn-cancel-template" class="btn btn-secondary">取消</button>
          <button id="btn-save-template" class="btn btn-primary">保存</button>
        </div>
      </div>
    </div>
    
    <!-- 页脚 -->
    <footer class="footer">
      <p>遇到问题可联系wx:yourkin666</p>
    </footer>
  </div>

  <script src="../utils/storage.js"></script>
  <script src="../utils/api.js"></script>
  <script src="sidepanel.js"></script>
</body>
</html>

