<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>CoLink æµ‹è¯•</title>
  <style>
    body {
      padding: 20px;
      font-family: Arial, sans-serif;
    }
    .status { padding: 10px; margin: 10px 0; border-radius: 5px; }
    .success { background: #d4edda; color: #155724; }
    .error { background: #f8d7da; color: #721c24; }
  </style>
</head>
<body>
  <h1>ğŸ”— CoLink è°ƒè¯•é¢æ¿</h1>
  <div id="results"></div>
  
  <script>
    const results = document.getElementById('results');
    
    function addResult(message, type = 'success') {
      const div = document.createElement('div');
      div.className = `status ${type}`;
      div.textContent = message;
      results.appendChild(div);
    }
    
    // æµ‹è¯• 1: Chrome API
    if (typeof chrome !== 'undefined' && chrome.storage) {
      addResult('âœ… Chrome API å¯ç”¨');
    } else {
      addResult('âŒ Chrome API ä¸å¯ç”¨', 'error');
    }
    
    // æµ‹è¯• 2: åç«¯è¿æ¥
    fetch('http://localhost:3000/health')
      .then(res => res.json())
      .then(data => {
        addResult('âœ… åç«¯è¿æ¥æˆåŠŸ: ' + data.status);
      })
      .catch(err => {
        addResult('âŒ åç«¯è¿æ¥å¤±è´¥: ' + err.message, 'error');
      });
    
    // æµ‹è¯• 3: Storage è¯»å†™
    if (typeof chrome !== 'undefined' && chrome.storage) {
      chrome.storage.local.set({ test: 'hello' }, () => {
        chrome.storage.local.get('test', (result) => {
          if (result.test === 'hello') {
            addResult('âœ… Chrome Storage æ­£å¸¸');
          } else {
            addResult('âŒ Chrome Storage è¯»å†™å¤±è´¥', 'error');
          }
        });
      });
    }
    
    // æµ‹è¯• 4: å½“å‰ URL
    chrome.storage.local.get('currentUsername', (result) => {
      if (result.currentUsername) {
        addResult('âœ… å½“å‰ç”¨æˆ·å: ' + result.currentUsername);
      } else {
        addResult('âš ï¸ æœªæ£€æµ‹åˆ° LinkedIn ç”¨æˆ·åï¼ˆè¯·è®¿é—® LinkedIn ä¸ªäººä¸»é¡µï¼‰', 'error');
      }
    });
    
    console.log('CoLink è°ƒè¯•é¢æ¿å·²åŠ è½½');
  </script>
</body>
</html>

